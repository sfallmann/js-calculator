<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset"utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets/css/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <header>
    </header>
      <div class="container">
        <div class="row">
          <div class="col-12">
            <section id="calculator" class="outline">
              <section id="display" class="outline">
                <div id="output" class="outline"></div>
              </section>
              <section id="interface" class="outline">
                <table id="buttons"class="outline" width=100%; height=100%>
                  <tr>
                    <td id="power-btn"><i class="fa fa-power-off" aria-hidden="true"></i></td>
                    <td id="clear-btn" data-value="C">C</td>
                    <td data-value="0">0</td>
                    <td id="equals-btn" data-value="=">=</td>
                  </tr>                
                  <tr>
                    <td data-value="7">7</td>
                    <td data-value="8">8</td>
                    <td data-value="9">9</td>
                    <td id="plus-btn" data-value="+"><i class="fa fa-plus" aria-hidden="true"></i></td>
                  </tr>
                  <tr>
                    <td data-value="4">4</td>
                    <td data-value="5">5</td>
                    <td data-value="6">6</td>
                    <td id="minus-btn" data-value="-"><i class="fa fa-minus" aria-hidden="true"></i></td>
                  </tr>
                  <tr>
                    <td data-value="1">1</td>
                    <td data-value="2">2</td>
                    <td data-value="3">3</td>
                    <td id="multiply-btn" data-value="x"><i class="fa fa-times" aria-hidden="true"></i></td>
                  </tr>
                  <tr>
                    <td id="percent-btn" data-value="%">%</td>
                    <td id="sqrt-btn">sqrt</td>
                    <td id="pow-btn" data-value="^"><i class="fa fa-chevron-up" aria-hidden="true"></i></td>
                    <td id="divide-btn" data-value="/">/</td>
                  </tr>                                                      
                </table>
              </section>
            </section>          
          </div>
        </div>
      </div>
    <footer>
    </footer>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="assets/js/calculator.js"></script>
    <script>
      var $output = $('#output');
      var $buttons = $('#buttons td');

      $buttons.on('click', function(){
        var value = $(this).attr('data-value');
        var valueArr = ($output.html()).split('');
        var lastValue = valueArr[valueArr.length - 1];
        var valOps = calculator.operators().includes(value);
        var lastValOps = calculator.operators().includes(lastValue);        
        
        if ((valOps && lastValOps ) || (valOps && typeof lastValue === undefined && value !== '-')){
          return;
        }

        switch(value){
          case '=':
            $output.html(calculator.calculate($output.html()));
            break;
          case 'C':
            if(valueArr.length){
              valueArr.pop();
              $output.html(valueArr.join(''));
            }
            break;
          default:
            $output.append(value);
        }
        
      });

    </script>
  </body>
</html>